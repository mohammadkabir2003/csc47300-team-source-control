<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Product — CCNY Exchange</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="product.css" />
  </head>
  <body>
    <a class="skip-to-content" href="#main">Skip to content</a>

    <header class="site-header">
      <div class="wrap">
        <a class="brand" href="index.html">CCNY Exchange</a>
        <nav aria-label="Primary">
          <a class="nav-link" href="index.html">Home</a>
          <a class="nav-link" href="market.html">Browse</a>
          <a class="nav-link" href="sell.html">Sell an Item</a>
          <a class="nav-link" href="safety.html">Safety</a>
          <a class="nav-link" href="cart.html">Cart <span id="nav-cart-count" class="cart-badge" style="display:none">0</span></a>
          <a class="nav-link" href="orders.html">Orders</a>
          <a class="nav-link" href="login.html">Log In</a>
          <a class="btn btn-primary btn-sm" href="signup.html">Sign Up</a>
        </nav>
      </div>
    </header>

    <main id="main" class="container">
      <div id="product-root">
        <header class="page-header">
          <h1 id="product-title">Loading…</h1>
          <p id="product-sub" class="muted"></p>
        </header>

        <section id="product-content" class="prose">
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;align-items:start;">
            <div>
              <div class="gallery">
                <div id="main-image" class="main-image thumb">&nbsp;</div>
                <div id="thumbs" class="thumb-row"></div>
              </div>
            </div>

            <div>
              <p id="product-price" style="font-size:1.5rem;font-weight:800;margin:0 0 .5rem">&nbsp;</p>
              <div style="margin-bottom:.6rem"><span id="product-condition" class="muted"></span> • <span id="product-location" class="muted"></span></div>

              <div id="tag-row" style="margin:.5rem 0"></div>

              <p id="product-desc" class="muted"></p>

              <div style="margin-top:1rem;display:flex;gap:.6rem;align-items:center">
                <label style="display:flex;gap:.4rem;align-items:center">
                  <span style="font-weight:600">Qty</span>
                  <input id="qty" class="input qty" type="number" min="1" value="1" />
                </label>

                <button id="add-cart" class="btn btn-primary">Add to Cart</button>
              </div>

              <dl style="margin-top:1rem">
                <div><dt style="font-weight:600">Seller</dt><dd id="product-seller" class="muted">&nbsp;</dd></div>
                <div><dt style="font-weight:600">Posted</dt><dd id="product-created" class="muted">&nbsp;</dd></div>
              </dl>
            </div>
          </div>

          <hr style="margin:1.25rem 0" />
          <section id="meta" class="muted">
            <h3>Details</h3>
            <p id="meta-details">&nbsp;</p>
          </section>

          <hr style="margin:2rem 0" />
          
          <!-- Reviews/Comments Section -->
          <section id="reviews-section" style="margin-top:2rem">
            <h3 style="margin-bottom:1rem">Reviews & Comments</h3>
            
            <!-- Add Review Form -->
            <div id="review-form-container" class="form" style="margin-bottom:2rem;padding:1.5rem;background:#f8fafc;border-radius:8px">
              <h4 style="margin-top:0">Leave a Review</h4>
              <form id="review-form">
                <div class="field">
                  <label for="review-rating">Rating<span class="req">*</span></label>
                  <select class="input" id="review-rating" name="rating" required>
                    <option value="">Select rating...</option>
                    <option value="5">⭐⭐⭐⭐⭐ Excellent</option>
                    <option value="4">⭐⭐⭐⭐ Good</option>
                    <option value="3">⭐⭐⭐ Average</option>
                    <option value="2">⭐⭐ Poor</option>
                    <option value="1">⭐ Very Poor</option>
                  </select>
                </div>
                <div class="field">
                  <label for="review-comment">Comment<span class="req">*</span></label>
                  <textarea class="input" id="review-comment" name="comment" rows="4" required placeholder="Share your experience with this product..."></textarea>
                </div>
                <p id="review-error" class="error-msg" role="alert" style="display:none"></p>
                <p id="review-success" class="success-msg" role="alert" style="display:none"></p>
                <button type="submit" class="btn btn-primary">Submit Review</button>
              </form>
            </div>

            <!-- Reviews List -->
            <div id="reviews-list">
              <p class="muted">Loading reviews...</p>
            </div>
          </section>
        </section>

        <div id="not-found" style="display:none" class="form">
          <h2>Product not found</h2>
          <p>We couldn't find that item. Try browsing the <a href="market.html">listings</a> instead.</p>
        </div>
      </div>
    </main>

    <footer class="site-footer">
      <div class="wrap">
        <p>Meet in public campus spaces. See <a href="safety.html">Safety & Policies</a>.</p>
      </div>
    </footer>

    <script type="importmap">
    {
      "imports": {
        "@supabase/supabase-js": "https://esm.sh/@supabase/supabase-js@2.45.0"
      }
    }
    </script>
    <script src="env.js"></script>
    <script type="module" src="dist/dark-mode.js"></script>
    <script type="module" src="dist/product.js"></script>
    <script type="module" src="dist/auth-ui.js"></script>
    <script type="module" src="dist/cart-utils.js"></script>
  </body>
</html>

